# Makefile
#
# Compiles presentations and handouts for the Introduction to Bioinformatics
# training course
#
# To generate all presentation files, issue `make presentation` or `make slides`
#
# To generate all handouts, issue `make handouts`.
#
# To generate both presentation files and handouts, issue `make all`.
#
# Based on a Make file (c) 2014-2015 by Leighton Pritchard, James Hutton Institute

.PHONY : all
all : presentation handouts

.PHONY : presentation
presentation : Biopython_Update_2019
	make clean_intermediates

.PHONY : slides
slides : presentation

.PHONY : handouts
handouts : Biopython_Update_2019
	make clean_intermediates

# Talks
.PHONY : Biopython_Update_2019
Biopython_Update_2019 : Biopython_Update_2019_slides Biopython_Update_2019_handouts

.PHONY : Biopython_Update_2019_slides
Biopython_Update_2019_slides : Biopython_Update_2019_slides.pdf

.PHONY : Biopython_Update_2019_handouts
Biopython_Update_2019_handouts : Biopython_Update_2019_handouts.pdf

# Clean up intermediate files generated by LaTeX
.PHONY : clean_intermediates
clean_intermediates:
	rm -f *.aux *.log *.nav *.out *.snm *.synctex.gz *.toc *.vrb

# Clean up output files (i.e. slides/handounts)
.PHONY : clean_pdf
clean_pdf:
	rm -f *.pdf

# Clean up both intermediate and output files
.PHONY : clean
clean: clean_intermediates clean_pdf

# Currently, changing any sub-file will trigger regeneration of all
# output PDF files.
# TODO: Add images/*.png images/*.jpg etc
%.pdf : %.tex sections/*.tex handoutWithNotes.sty
	pdflatex $<
	pdflatex $<
